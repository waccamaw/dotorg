{{ define "main" }}

<div class="updates-header">
	<h1>Updates</h1>
	<p class="section-description">Community updates, announcements, and news from the Waccamaw Indian People.</p>
</div>

<div class="h-feed updates-single">
	<article class="h-entry">
		<header class="post-header">
			{{ if .Title }}
				<h1 class="p-name">{{ .Title }}</h1>
			{{ end }}
			
			<div class="post-meta">
				<time class="dt-published" datetime="{{ .Date.Format "2006-01-02T15:04:05-0700" }}">
					{{ .Date.Format "January 2, 2006" }}
				</time>
				{{ with .Params.author }}
					by <span class="p-author h-card">{{ . }}</span>
				{{ end }}
			{{ if .Params.categories }}
				<span class="post-categories">
					{{ if reflect.IsSlice .Params.categories }}
						{{ range .Params.categories }}
							<span class="category-badge">{{ . }}</span>
						{{ end }}
					{{ else }}
						{{/* Handle comma-separated string */}}
						{{ $cats := split (string .Params.categories) ", " }}
						{{ range $cats }}
							<span class="category-badge">{{ . }}</span>
						{{ end }}
					{{ end }}
				</span>
			{{ end }}
			</div>
		</header>

		<div class="e-content">
			{{ .Content }}
		</div>

		<footer class="post-footer">
			<a href="{{ .Permalink }}" class="u-url">Permalink</a>
			{{ if .Site.Params.microblog_user }}
				· <a href="https://micro.blog/{{ .Site.Params.microblog_user }}/{{ path.Base .RelPermalink | strings.TrimSuffix ".html" }}">View on Micro.blog</a>
			{{ end }}
		</footer>
	</article>

	<nav class="post-navigation">
		{{ with .NextInSection }}
			<div class="nav-previous">
				<a href="{{ .Permalink }}" rel="prev">← {{ if .Title }}{{ .Title }}{{ else }}Previous{{ end }}</a>
			</div>
		{{ end }}
		{{ with .PrevInSection }}
			<div class="nav-next">
				<a href="{{ .Permalink }}" rel="next">{{ if .Title }}{{ .Title }}{{ else }}Next{{ end }} →</a>
			</div>
		{{ end }}
	</nav>
</div>

{{ end }}
